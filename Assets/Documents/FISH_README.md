# Fish.cs é‡æ§‹èªªæ˜æ–‡ä»¶

## ğŸ“‹ é‡æ§‹æ¦‚è¿°

é‡æ§‹å¾Œçš„ `Fish.cs` ç³»çµ±æä¾›å®Œæ•´çš„é­šé¡ç”Ÿæˆèˆ‡æ•ç²è¿½è¹¤åŠŸèƒ½ï¼ŒåŒ…å«ä»¥ä¸‹æª”æ¡ˆï¼š

### ä¿®æ”¹çš„æª”æ¡ˆ
1. **Fish.cs** - æ ¸å¿ƒè³‡æ–™é¡åˆ¥ï¼ˆé‡æ§‹ï¼‰
2. **Generator.cs** - é­šé¡ç”Ÿæˆå™¨ï¼ˆæ›´æ–°ï¼‰
3. **BucketEvent.cs** - æ¡¶å­äº‹ä»¶è™•ç†ï¼ˆé‡æ§‹ï¼‰

### æ–°å¢çš„æª”æ¡ˆ
4. **FishStatisticsManager.cs** - çµ±è¨ˆç®¡ç†å™¨ï¼ˆæ–°å¢ï¼Œå¯é¸ï¼‰

---

## ğŸ¯ Fish.cs æ ¸å¿ƒåŠŸèƒ½

### å±¬æ€§

| å±¬æ€§ | é¡å‹ | èªªæ˜ |
|------|------|------|
| `color` | string | é­šçš„é¡è‰²ï¼ˆTag åç¨±ï¼‰ |
| `spawnedAmount` | int | å·²ç”Ÿæˆçš„é­šæ•¸é‡ |
| `caughtAmount` | int | å·²æ•ç²çš„é­šæ•¸é‡ |
| `targetAmount` | int | ç›®æ¨™æ•ç²æ•¸é‡ï¼ˆå¯é¸ï¼‰ |
| `order` | int | é †åºç·¨è™Ÿ |

### ä¸»è¦æ–¹æ³•

#### âœ… å¢åŠ /æ¸›å°‘æ•ç²æ•¸é‡
```csharp
// å¢åŠ æ•ç²æ•¸é‡
bool IncrementCaught(int amount = 1)

// æ¸›å°‘æ•ç²æ•¸é‡ï¼ˆé­šé›¢é–‹æ¡¶å­ï¼‰
void DecrementCaught(int amount = 1)
```

#### ğŸ“Š é€²åº¦æŸ¥è©¢
```csharp
// å–å¾—æ•ç²é€²åº¦ï¼ˆ0.0 ~ 1.0ï¼‰
float GetProgress()

// å–å¾—ç›®æ¨™é€²åº¦ï¼ˆ0.0 ~ 1.0ï¼‰
float GetTargetProgress()

// å–å¾—å‰©é¤˜æœªæ•ç²æ•¸é‡
int GetRemainingAmount()
```

#### âœ”ï¸ ç‹€æ…‹æª¢æŸ¥
```csharp
// æª¢æŸ¥æ˜¯å¦é”æˆç›®æ¨™
bool IsTargetComplete()

// æª¢æŸ¥æ˜¯å¦å…¨éƒ¨æ•ç²
bool IsAllCaught()
```

---

## ğŸ”§ Generator.cs æ›´æ–°

### æ–°å¢åŠŸèƒ½

```csharp
// æ ¹æ“šé¡è‰²å–å¾—ç‰¹å®š Fish ç‰©ä»¶
Fish GetFishByColor(string color)

// å–å¾—ç¸½ç”Ÿæˆæ•¸é‡
int GetTotalSpawnedCount()

// å–å¾—ç¸½æ•ç²æ•¸é‡
int GetTotalCaughtCount()
```

### æ”¹é€²é»
- ç”Ÿæˆæ•¸é‡æ”¹ç‚º 1-3 éš»ï¼ˆé¿å…ç”Ÿæˆ 0 éš»ï¼‰
- æ·»åŠ ç”Ÿæˆæ—¥èªŒè¼¸å‡º
- ä½¿ç”¨æ­£ç¢ºçš„åƒæ•¸åç¨± `spawnedAmount`

---

## ğŸª£ BucketEvent.cs é‡æ§‹

### æ ¸å¿ƒæ”¹é€²

1. **å¯¦éš›è¿½è¹¤æ•ç²æ•¸é‡**
   - é­šé€²å…¥æ¡¶å­æ™‚ï¼š`fish.IncrementCaught()`
   - é­šé›¢é–‹æ¡¶å­æ™‚ï¼š`fish.DecrementCaught()`

2. **è©³ç´°çµ±è¨ˆè³‡è¨Š**
   - æ¯ç¨®é¡è‰²é­šçš„æ•ç²æ•¸é‡
   - æ¡¶å…§ç•¶å‰é­šæ•¸é‡
   - æ•´é«”æ•ç²é€²åº¦

3. **æ”¹é€²çš„ UI é¡¯ç¤º**
   - åŸºæœ¬é¡¯ç¤ºï¼šæ¡¶å…§é­šæ•¸
   - è©³ç´°çµ±è¨ˆï¼šå„é¡è‰²é­šçš„é€²åº¦

### æ–°å¢æ–¹æ³•

```csharp
// æª¢æŸ¥æ˜¯å¦å…¨éƒ¨æ•ç²å®Œæˆ
bool IsAllFishCaught()

// å–å¾—æ•´é«”æ•ç²é€²åº¦
float GetOverallProgress()
```

---

## ğŸ® ä½¿ç”¨ç¯„ä¾‹

### åœ¨ Unity Editor ä¸­è¨­ç½®

1. **Generator ç‰©ä»¶**
   - æ·»åŠ  `Generator.cs` è…³æœ¬
   - è¨­ç½® `fishPrefab` é™£åˆ—ï¼ˆç´…ã€è—ã€ç¶ é­šçš„ Prefabï¼‰
   - è¨­ç½® `boxCollider`ï¼ˆç”Ÿæˆç¯„åœï¼‰

2. **Bucket ç‰©ä»¶**
   - æ·»åŠ  `BucketEvent.cs` è…³æœ¬
   - è¨­ç½® `bucketText`ï¼ˆé¡¯ç¤ºæ¡¶å…§é­šæ•¸ï¼‰
   - è¨­ç½® `statisticsText`ï¼ˆé¡¯ç¤ºè©³ç´°çµ±è¨ˆï¼Œå¯é¸ï¼‰
   - å¼•ç”¨ `generator` ç‰©ä»¶

3. **çµ±è¨ˆç®¡ç†å™¨ï¼ˆå¯é¸ï¼‰**
   - å‰µå»ºç©º GameObject
   - æ·»åŠ  `FishStatisticsManager.cs`
   - å¼•ç”¨ Generator å’Œ BucketEvent
   - è¨­ç½®å„å€‹çµ±è¨ˆæ–‡å­—å…ƒä»¶

### ç¨‹å¼ç¢¼ç¯„ä¾‹

```csharp
// å–å¾—ç‰¹å®šé¡è‰²çš„é­šè³‡è¨Š
Fish redFish = generator.GetFishByColor("redFish");
Debug.Log($"ç´…é­šé€²åº¦: {redFish.GetProgress():P0}");

// æª¢æŸ¥æ˜¯å¦å®Œæˆ
if (bucketEvent.IsAllFishCaught())
{
    Debug.Log("æ‰€æœ‰é­šéƒ½å·²æ•ç²ï¼");
}

// å–å¾—æ•´é«”é€²åº¦
float progress = bucketEvent.GetOverallProgress();
Debug.Log($"æ•´é«”é€²åº¦: {progress:P0}");
```

---

## ğŸ“Š è¼¸å‡ºç¯„ä¾‹

### Console è¼¸å‡º
```
[Generator] ç”Ÿæˆ redFish: 2 éš»
[Generator] ç”Ÿæˆ blueFish: 3 éš»
[Generator] ç”Ÿæˆ greenFish: 1 éš»
[Generator] ç¸½å…±ç”Ÿæˆ 6 éš»é­š

[BucketEvent] redFish é€²å…¥æ¡¶å­
==================== é­šé¡çµ±è¨ˆ ====================
[redFish] ç”Ÿæˆ: 2 | æ•ç²: 1 | å‰©é¤˜: 1 | é€²åº¦: 50%
[blueFish] ç”Ÿæˆ: 3 | æ•ç²: 0 | å‰©é¤˜: 3 | é€²åº¦: 0%
[greenFish] ç”Ÿæˆ: 1 | æ•ç²: 0 | å‰©é¤˜: 1 | é€²åº¦: 0%
æ¡¶å…§é­šæ•¸: ç´…é­š 1 | è—é­š 0 | ç¶ é­š 0
ç¸½æ•ç²é€²åº¦: 1/6
=================================================
```

### UI é¡¯ç¤º
```
æ¡¶å…§é­šæ•¸: 1

=== æ•ç²çµ±è¨ˆ ===
ç´…é­š: 1/2 (50%)
è—é­š: 0/3 (0%)
ç¶ é­š: 0/1 (0%)

ç¸½è¨ˆ: 1/6
```

---

## ğŸš€ é€²éšæ‡‰ç”¨

### è¨­ç½®ç›®æ¨™æ•ç²æ•¸é‡

å¦‚æœæƒ³è¦è¨­å®šæ¯ç¨®é­šçš„ç›®æ¨™æ•¸é‡ï¼ˆä¾‹å¦‚ä»»å‹™ç³»çµ±ï¼‰ï¼š

```csharp
// åœ¨ Generator.cs ä¸­ä¿®æ”¹
fish.Add(new Fish(fishname[i], spawnCount, i + 1, targetAmount: 5));
```

ç„¶å¾Œå¯ä»¥ä½¿ç”¨ï¼š
```csharp
if (redFish.IsTargetComplete())
{
    Debug.Log("ç´…é­šä»»å‹™å®Œæˆï¼");
}
```

### éŠæˆ²çµæŸæª¢æ¸¬

```csharp
void Update()
{
    if (bucketEvent.IsAllFishCaught() && !gameEnded)
    {
        gameEnded = true;
        OnGameComplete();
    }
}

void OnGameComplete()
{
    Debug.Log("éŠæˆ²å®Œæˆï¼");
    Time.timeScale = 0; // æš«åœéŠæˆ²
    // é¡¯ç¤ºå®Œæˆç•«é¢...
}
```

---

## âš ï¸ æ³¨æ„äº‹é …

1. **Tag è¨­ç½®**ï¼šç¢ºä¿é­š GameObject æœ‰æ­£ç¢ºçš„ Tagï¼ˆredFish, blueFish, greenFishï¼‰

2. **ç”Ÿæˆé †åº**ï¼šGenerator çš„ `fishPrefab` é™£åˆ—é †åºè¦èˆ‡ `fishname` é™£åˆ—å°æ‡‰

3. **æ•ˆèƒ½è€ƒé‡**ï¼šå¦‚æœé­šæ•¸é‡å¾ˆå¤šï¼Œè€ƒæ…®é™ä½ `FishStatisticsManager` çš„ `updateInterval`

4. **è³‡æ–™ä¸€è‡´æ€§**ï¼š`caughtAmount` æœƒè‡ªå‹•æª¢æŸ¥ä¸æœƒè¶…é `spawnedAmount`

---

## ğŸ” é™¤éŒ¯åŠŸèƒ½

### åœ¨ Inspector ä¸­æŸ¥çœ‹çµ±è¨ˆ
- åœ¨ `FishStatisticsManager` çµ„ä»¶ä¸Šå³éµé¸æ“‡ `Show Full Report`

### Console è¼¸å‡º
- æ¯æ¬¡é­šé€²å‡ºæ¡¶å­éƒ½æœƒè¼¸å‡ºè©³ç´°çµ±è¨ˆ
- å¯ä»¥åœ¨ `BucketEvent` ä¸­èª¿æ•´è¼¸å‡ºé »ç‡

---

## ğŸ“ ç‰ˆæœ¬æ­·å²

### v2.0 (2025-10-20) - é‡æ§‹ç‰ˆæœ¬
- âœ… é‡æ–°å‘½å `caughtAmount` â†’ `spawnedAmount`
- âœ… æ–°å¢å¯¦éš›çš„ `caughtAmount` è¿½è¹¤
- âœ… æ–°å¢é€²åº¦è¨ˆç®—æ–¹æ³•
- âœ… æ–°å¢ç›®æ¨™ç³»çµ±
- âœ… æ”¹é€² UI é¡¯ç¤º
- âœ… æ–°å¢çµ±è¨ˆç®¡ç†å™¨

### v1.0 - åŸå§‹ç‰ˆæœ¬
- åŸºæœ¬çš„ Fish è³‡æ–™é¡åˆ¥
- åªè¨˜éŒ„ç”Ÿæˆæ•¸é‡

---

## ğŸ¤ è²¢ç»

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹è¯ç¹«é–‹ç™¼åœ˜éšŠã€‚
